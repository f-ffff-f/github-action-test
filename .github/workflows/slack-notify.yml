name: 'PULL REQUEST NOTIFICATION'

on:
  pull_request:
    types: [opened, reopened]
    branches:
      - 'main'

jobs:
  NOTIFICATION:
    if: "!contains(github.event.pull_request.title , 'Draft')"
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3

      - uses: 8398a7/action-slack@v3
        with:
          status: custom
          fields: repo,message,commit,author,action,eventName,ref,workflow,job,took,pullRequest
          custom_payload: |
            { 
              "attachments": [
                {
                  "color": "#f2c744",
                  "blocks": [
                    {
                        "type": "section",
                        "text": {
                          "type": "plain_text",
                          "emoji": true,

                          "text": "ÏÉàÎ°úÏö¥ PRÏù¥ Îì±Î°ù ÎêòÏóàÏñ¥Ïöîü§ó"
                        }
                    },
                     {
                      "type": "section",
                      "text": {
                        "type": "mrkdwn",
                        "text": `${process.env.AS_PULL_REQUEST}`
                      },
                    },
                    {
                      "type": "section",
                      "fields": [
                        {
                          "type": "mrkdwn",                            
                          "text": "*ÌîÑÎ°úÏ†ùÌä∏*\n*NEX*"
                        },
                        {
                          "type": "mrkdwn",
                          "text": "*Source*\n${{ github.head_ref }}"
                        },
                        {
                          "type": "mrkdwn",
                          "text": "*Target*\n${{ github.event.pull_request.base.ref }}"
                        },
                        {
                          "type": "mrkdwn",
                          "text": "*ÏûëÏÑ±Ïûê*\n${{ github.event.pull_request.user.login }}"
                        },
                      ]
                    }
                  ]
                }
              ] 
            }
        env:
          SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK_URL  }}
  ImmediatelyMERGE:
    if: "contains(github.event.pull_request.title , 'Draft')"
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3

      - uses: 8398a7/action-slack@v3
        with:
          status: custom
          fields: repo,message,commit,author,action,eventName,ref,workflow,job,took,pullRequest
          custom_payload: |
            { 
              "attachments": [
                {
                  "color": "#FF0000",
                  "blocks": [
                    {
                        "type": "section",
                        "text": {
                          "type": "plain_text",
                          "emoji": true,

                          "text": "üö®Î¶¨Î∑∞ÏóÜÏù¥ MERGE Îê©ÎãàÎã§."
                        }
                    },
                     {
                      "type": "section",
                      "text": {
                        "type": "mrkdwn",
                        "text": `${process.env.AS_PULL_REQUEST}`
                      },
                    },
                    {
                      "type": "section",
                      "fields": [
                        {
                          "type": "mrkdwn",                            
                          "text": "*ÌîÑÎ°úÏ†ùÌä∏*\n*NEX*"
                        },
                        {
                          "type": "mrkdwn",
                          "text": "*Source*\n${{ github.head_ref }}"
                        },
                        {
                          "type": "mrkdwn",
                          "text": "*Target*\n${{ github.event.pull_request.base.ref }}"
                        },
                        {
                          "type": "mrkdwn",
                          "text": "*ÏûëÏÑ±Ïûê*\n${{ github.event.pull_request.user.login }}"
                        },
                      ]
                    }
                  ]
                }
              ] 
            }
        env:
          SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK_URL  }}
